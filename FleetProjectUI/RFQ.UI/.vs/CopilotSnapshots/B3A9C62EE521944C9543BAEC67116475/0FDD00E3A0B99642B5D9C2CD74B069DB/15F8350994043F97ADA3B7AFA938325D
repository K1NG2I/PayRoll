using Microsoft.AspNetCore.Mvc;
using RFQ.UI.Application.Interface;
using RFQ.UI.Domain.Model;

namespace RFQ.UI.Controllers
{
    public class TestController : BaseController
    {
        public TestController(IMenuServices menuServices, GlobalClass globalClass) : base(menuServices, globalClass)
        {
        }

        public async Task<IActionResult> Index()
        {
            await SetMenuAsync();
            return View();
        }

        [HttpPost]
        public IActionResult ViewTestList([FromBody] object paging)
        {
            // sample data matching displayColumn mapping used by the generic renderer
            var data = new[] {
                new { userId = 1, personName = "Alice", company = "Acme", location = "HQ", mobileNo = "9999999991", emailId = "alice@example.com", isActive = true },
                new { userId = 2, personName = "Bob", company = "Beta", location = "Branch", mobileNo = "9999999992", emailId = "bob@example.com", isActive = true },
                new { userId = 3, personName = "Carol", company = "Gamma", location = "Remote", mobileNo = "9999999993", emailId = "carol@example.com", isActive = false }
            };

            var response = new {
                draw = 1,
                recordsTotal = data.Length,
                recordsFiltered = data.Length,
                data = data,
                // Use the same displayColumn mapping format you provided for users
                displayColumn = "PersonName as User Name,Company as Franchise/Corporate Name,Location as Location,MobileNo as Phone Number,EmailId as Email,IsActive as IsActive"
            };

            return Json(response);
        }
    }
}
